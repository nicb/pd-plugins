#N canvas 69 8 488 542 10;
#X obj 125 270 dac~ 1;
#N canvas 191 6 682 635 centroid 1;
#X obj 167 289 centroid~;
#X obj 89 273 *~;
#X obj 116 272 *~;
#X obj 89 300 +~;
#X obj 88 322 sqrt~;
#X obj 87 365 tabwrite~ fft;
#X obj 85 242 rfft~;
#X obj 43 498 block~ 4096;
#X obj 88 343 /~ 2048;
#X obj 87 1 inlet~;
#X obj 24 242 outlet~;
#X obj 167 314 outlet;
#X obj 5 446 tabwrite~ fftr;
#X obj 117 445 tabwrite~ ffti;
#X obj 230 2 inlet;
#X obj 230 27 metro 185.75;
#X obj 128 132 cos~;
#X obj 86 202 *~;
#X obj 127 107 phasor~;
#X msg 128 63 10.7666;
#X obj 128 84 sig~;
#X obj 142 1 loadbang;
#X msg 187 63 0;
#X obj 128 37 bng 15 250 50 0 empty empty empty 0 -6 0 8 -262144 -1
-1;
#X obj 128 162 *~ 0.5;
#X obj 128 184 -~ 0.5;
#X obj 230 52 s timing;
#X obj 142 343 r timing;
#X obj 123 424 r timing;
#X obj 167 251 r timing;
#X obj 12 425 r timing;
#X text 189 106 <- Hanning window;
#X text 238 290 <---;
#X text 271 226 left input: fft signal's real part;
#X text 271 241 right input: fft signal's imaginary part;
#X text 271 254 calculates:;
#X text 274 268 [1] modulo of the inputs;
#X text 274 281 [2] fft bin size;
#X text 274 295 [3] sum ((bin sizes)*(modulo));
#X text 274 310 [4] sum (moduli);
#X text 271 323 output:;
#X text 274 339 [3]/[4] (== centroid value);
#X text 249 439 part of the fft;
#X text 227 426 <- draw the real (left) and imaginary (right);
#X connect 0 0 11 0;
#X connect 1 0 3 0;
#X connect 2 0 3 1;
#X connect 3 0 4 0;
#X connect 4 0 8 0;
#X connect 6 0 0 0;
#X connect 6 0 1 0;
#X connect 6 0 1 1;
#X connect 6 0 12 0;
#X connect 6 1 0 1;
#X connect 6 1 2 0;
#X connect 6 1 2 1;
#X connect 6 1 13 0;
#X connect 8 0 5 0;
#X connect 9 0 10 0;
#X connect 9 0 17 0;
#X connect 14 0 15 0;
#X connect 15 0 26 0;
#X connect 16 0 24 0;
#X connect 17 0 6 0;
#X connect 18 0 16 0;
#X connect 19 0 20 0;
#X connect 20 0 18 0;
#X connect 21 0 23 0;
#X connect 22 0 18 1;
#X connect 23 0 19 0;
#X connect 23 0 22 0;
#X connect 24 0 25 0;
#X connect 25 0 17 1;
#X connect 27 0 5 0;
#X connect 28 0 13 0;
#X connect 29 0 0 0;
#X connect 30 0 12 0;
#X restore 124 241 pd centroid;
#N canvas 0 0 450 300 graph1 0;
#X array fft 256 float 2;
#X coords 0 0.025 255 -0.001 100 70 1;
#X restore 22 459 graph;
#X floatatom 196 272 10 0 0 0 - - -;
#N canvas 0 0 450 300 graph1 0;
#X array ffti 256 float 2;
#X coords 0 1000 255 -1000 100 70 1;
#X restore 134 368 graph;
#N canvas 0 0 450 300 graph1 0;
#X array fftr 256 float 2;
#X coords 0 1000 255 -1000 100 70 1;
#X restore 24 368 graph;
#X obj 196 221 tgl 15 0 empty empty empty 0 -6 0 8 -262144 -1 -1 0
1;
#X obj 32 26 noise~;
#X obj 42 90 lop~;
#X floatatom 65 70 5 0 0 0 - - -;
#X obj 68 49 hsl 128 15 0 100 0 0 empty empty empty -2 -6 0 8 -262131
-1 -1 0 1;
#X floatatom 204 70 15 0 0 0 - - -;
#X obj 207 49 hsl 128 15 0 11000 0 0 empty empty empty -2 -6 0 8 -258699
-1 -1 0 1;
#X obj 203 119 osc~;
#X obj 204 94 sig~;
#N canvas 257 338 450 300 centroid_plot 0;
#X obj 89 20 inlet;
#X obj 119 180 tabwrite centroid;
#X obj 161 87 +;
#X obj 197 87 int;
#X msg 162 66 1;
#X obj 161 113 % 256;
#X floatatom 162 138 5 0 0 0 - - -;
#X obj 89 42 t b f;
#X connect 0 0 7 0;
#X connect 2 0 3 0;
#X connect 2 0 5 0;
#X connect 3 0 2 1;
#X connect 4 0 2 0;
#X connect 5 0 6 0;
#X connect 6 0 1 1;
#X connect 7 0 4 0;
#X connect 7 1 1 0;
#X restore 196 300 pd centroid_plot;
#N canvas 0 0 450 300 graph2 0;
#X array centroid 256 float 2;
#X coords 0 5000 255 -10 100 70 1;
#X restore 130 459 graph;
#X obj 43 195 *~;
#X obj 202 193 *~;
#X msg 70 160 1;
#X msg 100 160 0;
#X obj 82 137 select noise osc;
#X msg 173 160 0;
#X msg 82 26 symbol noise;
#X msg 205 26 symbol osc;
#X msg 140 160 0.2;
#X text 218 221 <- click to activate;
#X text 217 243 <- this is where the real module is!;
#X connect 1 0 0 0;
#X connect 1 1 3 0;
#X connect 3 0 15 0;
#X connect 6 0 1 1;
#X connect 7 0 8 0;
#X connect 8 0 17 0;
#X connect 9 0 8 1;
#X connect 10 0 9 0;
#X connect 11 0 14 0;
#X connect 12 0 11 0;
#X connect 13 0 18 0;
#X connect 14 0 13 0;
#X connect 17 0 1 0;
#X connect 18 0 1 0;
#X connect 19 0 17 1;
#X connect 20 0 18 1;
#X connect 21 0 19 0;
#X connect 21 0 20 0;
#X connect 21 1 25 0;
#X connect 21 1 22 0;
#X connect 22 0 17 1;
#X connect 23 0 21 0;
#X connect 24 0 21 0;
#X connect 25 0 18 1;
